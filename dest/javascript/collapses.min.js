!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("TrowelCollapses",[],e):"object"==typeof exports?exports.TrowelCollapses=e():t.TrowelCollapses=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var i={};return e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function t(e){n(this,t),e.forEach(function(t,e){new r(t)})};e.default=o;var r=function(){function t(e){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n(this,t),this.collapse=e,this.nested=i,this.isVisible?this.show():this.hide(),this.listener(),this.collapse.dispatchEvent(this.events.mounted)}return s(t,[{key:"show",value:function(){this.collapse.dispatchEvent(this.events.show),this.collapse.setAttribute("data-state","visible"),this.triggers.map(function(t){return t.addActiveclass()}),this.otherCollapsesFromGroup.forEach(function(t){return t.hide()}),this.collapse.dispatchEvent(this.events.shown)}},{key:"hide",value:function(){this.collapse.dispatchEvent(this.events.hide),this.collapse.setAttribute("data-state","hidden"),this.triggers.map(function(t){return t.removeActiveclass()}),this.collapse.dispatchEvent(this.events.hidden)}},{key:"toggle",value:function(){this.collapse.dispatchEvent(this.events.toggle),this.isVisible?this.hide():this.show(),this.collapse.dispatchEvent(this.events.toggled)}},{key:"listener",value:function(){var t=this;if(!this.nested)return!1;this.toggleTriggers.map(function(e){return e.domEl.addEventListener("click",t.toggle.bind(t))}),this.showTriggers.map(function(e){return e.domEl.addEventListener("click",t.show.bind(t))}),this.hideTriggers.map(function(e){return e.domEl.addEventListener("click",t.hide.bind(t))})}},{key:"isVisible",get:function(){return"visible"==this.collapse.getAttribute("data-state")}},{key:"groupName",get:function(){return this.collapse.getAttribute("data-group")}},{key:"isEffectingOtherCollapsesFromGroup",get:function(){return this.groupName&&this.nested}},{key:"otherCollapsesFromGroup",get:function(){var e=this;if(!this.isEffectingOtherCollapsesFromGroup)return[];var i=document.querySelectorAll('[data-group="'+this.groupName+'"]');return[].slice.call(i).filter(function(t){return t!=e.collapse}).map(function(e){return new t(e,!1)})}},{key:"triggers",get:function(){var t=document.querySelectorAll('[data-collapse][data-href="#'+this.collapse.id+'"]');return Array.prototype.slice.call(t).map(function(t){return new l(t)})}},{key:"toggleTriggers",get:function(){return this.triggers.filter(function(t){return t.isToggleAction})}},{key:"showTriggers",get:function(){return this.triggers.filter(function(t){return t.isShowAction})}},{key:"hideTriggers",get:function(){return this.triggers.filter(function(t){return t.isHideAction})}},{key:"events",get:function(){return{show:new Event("trowel.collapse.show"),shown:new Event("trowel.collapse.shown"),hide:new Event("trowel.collapse.hide"),hidden:new Event("trowel.collapse.hidden"),toggle:new Event("trowel.collapse.toggle"),toggled:new Event("trowel.collapse.toggled"),mounted:new Event("trowel.collapse.mounted")}}}]),t}(),l=function(){function t(e){n(this,t),this.domEl=e,this.domEl.dispatchEvent(this.events.mounted)}return s(t,[{key:"addActiveclass",value:function(){this.domEl.dispatchEvent(this.events.activate),this.domEl.classList.add(this.activeclass),this.domEl.dispatchEvent(this.events.activated)}},{key:"removeActiveclass",value:function(){this.domEl.dispatchEvent(this.events.desactivate),this.domEl.classList.remove(this.activeclass),this.domEl.dispatchEvent(this.events.desactivated)}},{key:"toggleActiveclass",value:function(){this.domEl.dispatchEvent(this.events.toggle),this.domEl.classList.toggle(this.activeclass),this.domEl.dispatchEvent(this.events.toggled)}},{key:"activeclass",get:function(){return this.domEl.getAttribute("data-activeclass")}},{key:"action",get:function(){return this.domEl.getAttribute("data-collapse")}},{key:"isToggleAction",get:function(){return"toggle"==this.action}},{key:"isShowAction",get:function(){return"show"==this.action}},{key:"isHideAction",get:function(){this.action}},{key:"events",get:function(){return{activate:new Event("trowel.collapse.trigger.activate"),activated:new Event("trowel.collapse.trigger.activated"),desactivate:new Event("trowel.collapse.desactivate.hide"),desactivated:new Event("trowel.collapse.desactivated.hidden"),toggle:new Event("trowel.collapse.trigger.toggle"),toggled:new Event("trowel.collapse.trigger.toggled"),mounted:new Event("trowel.collapse.trigger.mounted")}}}]),t}();t.exports=e.default}])});